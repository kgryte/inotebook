'use strict';

// MODULES //

var bunyan = require( 'bunyan' ),
	pkginfo = require( 'pkginfo' ),
	config = require( 'config' );


// LOGGER //

/**
* FUNCTION: create()
*	Creates a logger instance.
*
* @returns {Logger} Logger instance
*/
function create() {
	var logger = bunyan.createLogger({
		'name': pkginfo.read( require.main ).package.name,
		'streams': [
			{
				'name': 'main',
				'level': config.get( 'logger.level' ),
				'stream': process.stdout
			}
		],
		'serializers': {
			'request': bunyan.stdSerializers.req,
			'response': bunyan.stdSerializers.res,
			'error': bunyan.stdSerializers.err
		}
	});
	return logger;
} // end FUNCTION create()


// EXPORTS //

module.exports = create(); // singleton
